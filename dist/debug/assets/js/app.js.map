{"version":3,"sources":["app/app.js","app/config.js","app/firebase-client.js"],"names":["document","foundation","window","GreenhouseGames","client","authHelpers","showAuth","show","hide","hideAuth","text","loginSuccess","data","attr","user","photoURL","displayName","loginError","err","console","log","firebase","auth","onAuthStateChanged","isAnonymous","i","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga","module","exports","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","staticFirebase","FirebaseClient","initializeApp","currentUser","uid","signOut","name","provider","GoogleAuthProvider","FacebookAuthProvider","TwitterAuthProvider","GithubAuthProvider","signInWithPopup","promise","Promise","resolve","callback","off","reject","waitForAuth","then","signInAnonymously","catch"],"mappings":"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","file":"public/assets/js/app.js","sourcesContent":["import $ from 'jquery';\nimport FirebaseClient from './firebase-client';\n\n$(document).foundation();\n\nwindow.GreenhouseGames = {\n  client: new FirebaseClient(),\n  authHelpers: {\n    showAuth: () => {\n      $('.show-auth').show();\n      $('.hide-auth').hide();\n    },\n    hideAuth: () => {\n      $('.hide-auth').show();\n      $('.show-auth').hide();\n      $('span.user-name').text('Login');\n    },\n    loginSuccess: (data) => {\n      $('#user_image').attr('src', data.user.photoURL);\n      $('#user_name').text(data.user.displayName);\n      $('span.user-name').text(data.user.displayName);\n      window.GreenhouseGames.authHelpers.showAuth();\n    },\n    loginError: (err) => {\n      console.log(err);\n    }\n  }\n};\n\nwindow.GreenhouseGames.client.firebase.auth().onAuthStateChanged((user) => {\n  if (user && !user.isAnonymous) {\n    window.GreenhouseGames.authHelpers.loginSuccess({user: user});\n  } else {\n    window.GreenhouseGames.authHelpers.hideAuth();\n  }\n});\n\n// Google Analytics\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-85526007-1', 'auto');\nga('send', 'pageview');\n","module.exports = {\n  apiKey: 'AIzaSyCqcbh9XmZZBahTDxmj4GXbwQny9H9wHdo',\n  authDomain: 'greenhouse-games-test.firebaseapp.com',\n  databaseURL: 'https://greenhouse-games-test.firebaseio.com',\n  storageBucket: '',\n  messagingSenderId: '756331628096'\n};\n","import firebase from 'firebase';\nimport rsvp from 'rsvp';\nimport config from './config';\n\nlet staticFirebase = null;\n\nclass FirebaseClient {\n  constructor() {\n    if (!staticFirebase) {\n      staticFirebase = firebase.initializeApp(config);\n    }\n    this.firebase = staticFirebase;\n  }\n\n  currentUID() {\n    return this.firebase.auth().currentUser ? this.firebase.auth().currentUser.uid : null;\n  }\n\n  signOut() {\n    return this.firebase.auth().signOut();\n  }\n\n  signInWithPopup(name) {\n    let provider;\n    switch (name) {\n      case 'google':\n        provider = new firebase.auth.GoogleAuthProvider();\n        break;\n      case 'facebook':\n        provider = new firebase.auth.FacebookAuthProvider();\n        break;\n      case 'twitter':\n        provider = new firebase.auth.TwitterAuthProvider();\n        break;\n      case 'github':\n        provider = new firebase.auth.GithubAuthProvider();\n        break;\n      default:\n        console.log('Provider \"' + name + '\" is not support');\n        return;\n    }\n\n    return this.firebase.auth().signInWithPopup(provider);\n  }\n\n  waitForAuth() {\n    const auth = this.firebase.auth();\n    const promise = new rsvp.Promise((resolve) => {\n      const callback = () => {\n        off();\n        resolve();\n      };\n      const off = auth.onAuthStateChanged(callback);\n    });\n    return promise;\n  }\n\n  requireAuth() {\n    const promise = new rsvp.Promise((resolve, reject) => {\n      this.waitForAuth().then(() => {\n        if (!this.firebase.auth().currentUser) {\n          this.firebase.auth().signInAnonymously().then(resolve).catch(reject);\n        } else {\n          resolve();\n        }\n      }).catch(reject);\n    });\n    return promise;\n  }\n}\n\nmodule.exports = FirebaseClient;\n"]}