{"version":3,"sources":["app/app.js","app/config.js","app/firebase-client.js","app/reporting/game-template.js","app/reporting/heartbeat.js","app/reporting/index.js","app/reporting/smashdot.js"],"names":["document","foundation","client","firebase","auth","onAuthStateChanged","user","isAnonymous","loginSuccess","hideAuth","window","GreenhouseGames","account","initAccountPage","reporting","initGamePage","i","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga","showAuth","jQuery","show","hide","text","data","image","attr","photoURL","name","displayName","loginError","err","console","log","addClass","buttons","logout","click","signOut","then","catch","twitter","signInWithPopup","facebook","google","github","Reporting","require","report","loadCharts","ready","draw","resize","module","exports","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","staticFirebase","FirebaseClient","initializeApp","currentUser","uid","provider","GoogleAuthProvider","FacebookAuthProvider","TwitterAuthProvider","GithubAuthProvider","promise","Promise","resolve","callback","off","reject","waitForAuth","signInAnonymously","database","ref","done","charts","load","setOnLoadCallback","requireAuth","_draw","gamesPlayedQuery","filter","sum","select","usersPlayedQuery","count","lastPlayedQuery","last","aClickedQuery","value","bClickedQuery","queryStartTime","setMinutes","setSeconds","setMilliseconds","queryEndTime","setTime","getTime","setHours","getHours","aClickedThisHourQuery","during","valuesAsArray","bClickedThisHourQuery","setDate","getDate","aClickedTodayQuery","bClickedTodayQuery","setMonth","getMonth","aClickedMonthQuery","bClickedMonthQuery","setFullYear","getFullYear","aClickedYearQuery","bClickedYearQuery","values","total","date","toLocaleString","all","element","visualization","arrayToDataTable","options","title","width","height","legend","position","chart","PieChart","chartdata","length","timestamp","LineChart","_drawGamePlayed","_drawUsersPlayed","_drawLastPlayed","toISOString","timeago","_drawClassicRankings","_drawSurvivalRankings","_drawMaxScores","_drawModesPlayed","max","currentUID","mode","pr","greater","min","pieHole","ColumnChart"],"mappings":"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","file":"public/assets/js/app.js","sourcesContent":["import $ from 'jquery';\nimport './reporting';\nimport FirebaseClient from './firebase-client';\n\n$(document).foundation();\n\nconst client = new FirebaseClient();\nclient.firebase.auth().onAuthStateChanged((user) => {\n  if (user && !user.isAnonymous) {\n    loginSuccess({user: user});\n  } else {\n    hideAuth();\n  }\n});\n\nif (window.GreenhouseGames.account) {\n  initAccountPage();\n}\n\nif (window.GreenhouseGames.reporting) {\n  initGamePage();\n}\n\n// Google Analytics\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-85526007-1', 'auto');\nga('send', 'pageview');\n\n/*\n * AUTH HELPERS\n */\nfunction showAuth() {\n  jQuery('.show-auth').show();\n  jQuery('.hide-auth').hide();\n}\n\nfunction hideAuth() {\n  jQuery('.hide-auth').show();\n  jQuery('.show-auth').hide();\n  jQuery('span.user-name').text('Login');\n}\n\nfunction loginSuccess(data) {\n  if (window.GreenhouseGames.account) {\n    jQuery('#' + window.GreenhouseGames.account.user.image).attr('src', data.user.photoURL);\n    jQuery('#' + window.GreenhouseGames.account.user.name).text(data.user.displayName);\n  }\n  jQuery('span.user-name').text(data.user.displayName);\n  showAuth();\n}\n\nfunction loginError(err) {\n  console.log(err);\n}\n\n/*\n * PAGE HELPERS\n */\nfunction initAccountPage() {\n  jQuery('section.main').addClass('subpage');\n\n  // init buttons\n  jQuery('#' + window.GreenhouseGames.account.buttons.logout).click(() => client.signOut().then(hideAuth).catch(hideAuth));\n  jQuery('#' + window.GreenhouseGames.account.buttons.twitter).click(() => client.signInWithPopup('twitter').then(loginSuccess).catch(loginError));\n  jQuery('#' + window.GreenhouseGames.account.buttons.facebook).click(() => client.signInWithPopup('facebook').then(loginSuccess).catch(loginError));\n  jQuery('#' + window.GreenhouseGames.account.buttons.google).click(() => client.signInWithPopup('google'));\n  jQuery('#' + window.GreenhouseGames.account.buttons.github).click(() => client.signInWithPopup('github').then(loginSuccess).catch(loginError));\n}\n\nfunction initGamePage() {\n  jQuery('section.main').addClass('subpage');\n\n  var Reporting = require('reporting/' + window.GreenhouseGames.reporting + '.js');\n  var report = new Reporting();\n  report.loadCharts(() => {\n    $(document).ready(() => {\n      report.draw();\n\n      $(window).resize(() => {\n        report.draw();\n      });\n    });\n  });\n}\n","module.exports = {\n  apiKey: 'AIzaSyCqcbh9XmZZBahTDxmj4GXbwQny9H9wHdo',\n  authDomain: 'greenhouse-games-test.firebaseapp.com',\n  databaseURL: 'https://greenhouse-games-test.firebaseio.com',\n  storageBucket: '',\n  messagingSenderId: '756331628096'\n};\n","import GameTemplateReporting from '@greenhousegames/game-template/dist/reporting';\nimport firebase from 'firebase';\nimport rsvp from 'rsvp';\nimport config from './config';\n\nlet staticFirebase = null;\n\nclass FirebaseClient {\n  constructor() {\n    if (!staticFirebase) {\n      staticFirebase = firebase.initializeApp(config);\n    }\n    this.firebase = staticFirebase;\n  }\n\n  currentUID() {\n    return this.firebase.auth().currentUser ? this.firebase.auth().currentUser.uid : null;\n  }\n\n  signOut() {\n    return this.firebase.auth().signOut();\n  }\n\n  signInWithPopup(name) {\n    let provider;\n    switch (name) {\n      case 'google':\n        provider = new firebase.auth.GoogleAuthProvider();\n        break;\n      case 'facebook':\n        provider = new firebase.auth.FacebookAuthProvider();\n        break;\n      case 'twitter':\n        provider = new firebase.auth.TwitterAuthProvider();\n        break;\n      case 'github':\n        provider = new firebase.auth.GithubAuthProvider();\n        break;\n      default:\n        console.log('Provider \"' + name + '\" is not support');\n        return;\n    }\n\n    return this.firebase.auth().signInWithPopup(provider);\n  }\n\n  waitForAuth() {\n    const auth = this.firebase.auth();\n    const promise = new rsvp.Promise((resolve) => {\n      const callback = () => {\n        off();\n        resolve();\n      };\n      const off = auth.onAuthStateChanged(callback);\n    });\n    return promise;\n  }\n\n  requireAuth() {\n    const promise = new rsvp.Promise((resolve, reject) => {\n      this.waitForAuth().then(() => {\n        if (!this.firebase.auth().currentUser) {\n          this.firebase.auth().signInAnonymously().then(resolve).catch(reject);\n        } else {\n          resolve();\n        }\n      }).catch(reject);\n    });\n    return promise;\n  }\n}\n\nmodule.exports = FirebaseClient;\n","import GameReporting from '@greenhousegames/game-template/dist/reporting';\nimport FirebaseClient from '../firebase-client';\nimport rsvp from 'rsvp';\n\nclass Reporting extends FirebaseClient {\n  constructor() {\n    super();\n    this.reporting = new GameReporting(this.firebase.database().ref('games/game-template/data'), this.firebase.database().ref('games/game-template/reporting'));\n  }\n\n  loadCharts(done) {\n    google.charts.load('current', {'packages':['corechart']});\n    google.charts.setOnLoadCallback(done);\n  }\n\n  draw() {\n    this.requireAuth().then(() => {\n      this._draw();\n    });\n  }\n\n  _draw() {\n    var gamesPlayedQuery = this.reporting.filter().sum('played').select(1);\n    var usersPlayedQuery = this.reporting.filter('users').sum('played').count();\n    var lastPlayedQuery = this.reporting.filter().last('endedAt').select(1);\n    var aClickedQuery = this.reporting.filter().sum('aclicked').value();\n    var bClickedQuery = this.reporting.filter().sum('bclicked').value();\n\n    var queryStartTime = new Date();\n    queryStartTime.setMinutes(0);\n    queryStartTime.setSeconds(0);\n    queryStartTime.setMilliseconds(0);\n    var queryEndTime = new Date();\n    queryEndTime.setTime(queryStartTime.getTime());\n    queryEndTime.setHours(queryStartTime.getHours() + 1);\n    var aClickedThisHourQuery = this.reporting.filter().sum('aclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'minute').valuesAsArray();\n    var bClickedThisHourQuery = this.reporting.filter().sum('bclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'minute').valuesAsArray();\n\n    queryStartTime.setHours(0);\n    queryEndTime.setTime(queryStartTime.getTime());\n    queryEndTime.setDate(queryStartTime.getDate() + 1);\n    var aClickedTodayQuery = this.reporting.filter().sum('aclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'hour').valuesAsArray();\n    var bClickedTodayQuery = this.reporting.filter().sum('bclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'hour').valuesAsArray();\n\n    queryStartTime.setDate(1);\n    queryEndTime.setTime(queryStartTime.getTime());\n    queryEndTime.setMonth(queryStartTime.getMonth() + 1);\n    var aClickedMonthQuery = this.reporting.filter().sum('aclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'day').valuesAsArray();\n    var bClickedMonthQuery = this.reporting.filter().sum('bclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'day').valuesAsArray();\n\n    queryStartTime.setMonth(1);\n    queryEndTime.setTime(queryStartTime.getTime());\n    queryEndTime.setFullYear(queryStartTime.getFullYear() + 1);\n    var aClickedYearQuery = this.reporting.filter().sum('aclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'week').valuesAsArray();\n    var bClickedYearQuery = this.reporting.filter().sum('bclicked').during(queryStartTime.getTime(), queryEndTime.getTime(), 'week').valuesAsArray();\n\n    gamesPlayedQuery.then(function(values) {\n      jQuery('#game_played_count').text(values[0] || 0);\n    }).catch(function(err) { console.log(err); });\n\n    usersPlayedQuery.then(function(total) {\n      jQuery('#user_played_count').text(total);\n    }).catch(function(err) { console.log(err); });\n\n    lastPlayedQuery.then(function(values) {\n      if (!values) {\n        jQuery('#last_played_count').text('never');\n      } else {\n        var date = new Date();\n        date.setTime(values[0]);\n        jQuery('#last_played_count').text(date.toLocaleString());\n      }\n    }).catch(function(err) { console.log(err); });\n\n    rsvp.all([aClickedQuery, bClickedQuery]).then(function(values) {\n      var element = jQuery('#pie_chart_div');\n      var data = new google.visualization.arrayToDataTable([\n        ['Button', 'Times Clicked'],\n        ['A', values[0]],\n        ['B', values[1]]\n      ]);\n\n      // Set chart options\n      var options = {\n         title:'Buttons Clicked',\n         width: element.width(),\n         height: 400,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.PieChart(element[0]);\n      chart.draw(data, options);\n    });\n\n    rsvp.all([aClickedThisHourQuery, bClickedThisHourQuery]).then(function(values) {\n      var element = jQuery('#line_chart_div');\n      var chartdata = [['Time', 'A', 'B']];\n      for (var i = 0; i < values[0].length; i++) {\n        chartdata.push([new Date(values[0][i].timestamp), values[0][i].value, values[1][i].value]);\n      }\n      var data = new google.visualization.arrayToDataTable(chartdata);\n\n      // Set chart options\n      var options = {\n         title:'Buttons Clicked this Hour',\n         width: element.width(),\n         height: 400,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.LineChart(element[0]);\n      chart.draw(data, options);\n    });\n\n    rsvp.all([aClickedTodayQuery, bClickedTodayQuery]).then(function(values) {\n      var element = jQuery('#line_chart_div2');\n      var chartdata = [['Time', 'A', 'B']];\n      for (var i = 0; i < values[0].length; i++) {\n        chartdata.push([new Date(values[0][i].timestamp), values[0][i].value, values[1][i].value]);\n      }\n      var data = new google.visualization.arrayToDataTable(chartdata);\n\n      // Set chart options\n      var options = {\n         title:'Buttons Clicked Today',\n         width: element.width(),\n         height: 400,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.LineChart(element[0]);\n      chart.draw(data, options);\n    });\n\n    rsvp.all([aClickedMonthQuery, bClickedMonthQuery]).then(function(values) {\n    var element = jQuery('#line_chart_div3');\n      var chartdata = [['Time', 'A', 'B']];\n      for (var i = 0; i < values[0].length; i++) {\n        chartdata.push([new Date(values[0][i].timestamp), values[0][i].value, values[1][i].value]);\n      }\n      var data = new google.visualization.arrayToDataTable(chartdata);\n\n      // Set chart options\n      var options = {\n         title:'Buttons Clicked this Month',\n         width: element.width(),\n         height: 400,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.LineChart(element[0]);\n      chart.draw(data, options);\n    });\n\n    rsvp.all([aClickedYearQuery, bClickedYearQuery]).then(function(values) {\n      var element = jQuery('#line_chart_div4');\n      var chartdata = [['Time', 'A', 'B']];\n      for (var i = 0; i < values[0].length; i++) {\n        chartdata.push([new Date(values[0][i].timestamp), values[0][i].value, values[1][i].value]);\n      }\n      var data = new google.visualization.arrayToDataTable(chartdata);\n\n      // Set chart options\n      var options = {\n         title:'Buttons Clicked this Year',\n         width: element.width(),\n         height: 400,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.LineChart(element[0]);\n      chart.draw(data, options);\n    });\n  }\n}\n\nmodule.exports = Reporting;\n","import GameReporting from '@greenhousegames/heartbeat/dist/reporting';\nimport FirebaseClient from '../firebase-client';\nimport rsvp from 'rsvp';\n\nclass Reporting extends FirebaseClient {\n  constructor() {\n    super();\n    this.reporting = new GameReporting(this.firebase.database().ref('games/heartbeat/data'), this.firebase.database().ref('games/heartbeat/reporting'));\n  }\n\n  loadCharts(done) {\n    google.charts.load('current', {'packages':['corechart']});\n    google.charts.setOnLoadCallback(done);\n  }\n\n  draw() {\n    this.requireAuth().then(() => {\n      // metrics\n      this._drawGamePlayed();\n      this._drawUsersPlayed();\n      this._drawLastPlayed();\n    });\n  }\n\n  _drawGamePlayed() {\n    this.reporting.filter().sum('played').select(1).then(function(values) {\n      jQuery('#game_played_count').text(values[0] || 0);\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawUsersPlayed() {\n    this.reporting.filter('users').sum('played').count().then(function(total) {\n      jQuery('#user_played_count').text(total);\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawLastPlayed() {\n    this.reporting.filter().last('endedAt').select(1).then(function(values) {\n      if (!values[0]) {\n        jQuery('#last_played_timestamp').text('never');\n      } else {\n        var date = new Date();\n        date.setTime(values[0]);\n        jQuery('#last_played_timestamp').attr('datetime', date.toISOString());\n        jQuery('#last_played_timestamp').timeago();\n      }\n    }).catch(function(err) { console.log(err); });\n  }\n}\n\nmodule.exports = Reporting;\n","import './heartbeat';\nimport './smashdot';\n","import GameReporting from '@greenhousegames/smash-dot/dist/reporting';\nimport FirebaseClient from '../firebase-client';\nimport rsvp from 'rsvp';\n\nclass Reporting extends FirebaseClient {\n  constructor() {\n    super();\n    this.reporting = new GameReporting(this.firebase.database().ref('games/smashdot/data'), this.firebase.database().ref('games/smashdot/reporting'));\n  }\n\n  loadCharts(done) {\n    google.charts.load('current', {'packages':['corechart']});\n    google.charts.setOnLoadCallback(done);\n  }\n\n  draw() {\n    this.requireAuth().then(() => {\n      // metrics\n      this._drawGamePlayed();\n      this._drawUsersPlayed();\n      this._drawLastPlayed();\n\n      // rankings\n      this._drawClassicRankings();\n      this._drawSurvivalRankings();\n\n      // charts\n      this._drawMaxScores();\n      this._drawModesPlayed();\n    });\n  }\n\n  _drawClassicRankings() {\n    this.reporting.filter('users').max('classic-score').count().then((value) => {\n      jQuery('#classic_ranking2').text('of ' + value);\n    }).catch(function(err) { console.log(err); });\n\n    this.reporting.filter('users-modes', {\n      uid: this.currentUID(),\n      mode: 'classic'\n    }).max('classic-score').value().then((pr) => {\n      if (pr) {\n        this.reporting.filter('users', {\n          uid: this.currentUID()\n        }).max('classic-score').greater(pr).count().then((value) => {\n          jQuery('#classic_ranking1').text('#' + value);\n        });\n      } else {\n        jQuery('#classic_ranking1').text('N/A');\n      }\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawSurvivalRankings() {\n    this.reporting.filter('users').min('survival-duration').count().then((value) => {\n      jQuery('#survival_ranking2').text('of ' + value);\n    }).catch(function(err) { console.log(err); });\n\n    this.reporting.filter('users-modes', {\n      uid: this.currentUID(),\n      mode: 'survival'\n    }).min('survival-duration').value().then((pr) => {\n      if (pr) {\n        this.reporting.filter('users', {\n          uid: this.currentUID()\n        }).min('survival-duration').greater(pr).count().then((value) => {\n          jQuery('#survival_ranking1').text('#' + value);\n        });\n      } else {\n        jQuery('#survival_ranking1').text('N/A');\n      }\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawGamePlayed() {\n    this.reporting.filter().sum('played').select(1).then(function(values) {\n      jQuery('#game_played_count').text(values[0] || 0);\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawUsersPlayed() {\n    this.reporting.filter('users').sum('played').count().then(function(total) {\n      jQuery('#user_played_count').text(total);\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawLastPlayed() {\n    this.reporting.filter().last('endedAt').select(1).then(function(values) {\n      if (!values[0]) {\n        jQuery('#last_played_timestamp').text('never');\n      } else {\n        var date = new Date();\n        date.setTime(values[0]);\n        jQuery('#last_played_timestamp').attr('datetime', date.toISOString());\n        jQuery('#last_played_timestamp').timeago();\n      }\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawModesPlayed() {\n    rsvp.all([\n      this.reporting.filter('modes', { mode: 'survival' }).sum('played').value(),\n      this.reporting.filter('modes', { mode: 'classic' }).sum('played').value(),\n      this.reporting.filter('modes', { mode: 'battle' }).sum('played').value()\n    ]).then(function(values) {\n      var element = jQuery('#sum_played_chart');\n      var data = new google.visualization.arrayToDataTable([\n        ['Mode', 'Times Played'],\n        ['Survival', values[0] || 0],\n        ['Classic', values[1] || 0],\n        ['Battle', values[2] || 0]\n      ]);\n\n      // Set chart options\n      var options = {\n         title:'Modes Played',\n         width: element.width(),\n         height: 400,\n         pieHole: 0.4,\n         legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.PieChart(element[0]);\n      chart.draw(data, options);\n    }).catch(function(err) { console.log(err); });\n  }\n\n  _drawMaxScores() {\n    rsvp.all([\n      this.reporting.filter('modes', { mode: 'survival' }).max('survival-score').value(),\n      this.reporting.filter('modes', { mode: 'classic' }).max('classic-score').value(),\n      this.reporting.filter('modes', { mode: 'battle' }).max('battle-score').value()\n    ]).then(function(values) {\n      var element = jQuery('#max_score_chart');\n      var data = new google.visualization.arrayToDataTable([\n        ['Mode', 'Max Score'],\n        ['Survival', values[0] || 0],\n        ['Classic', values[1] || 0],\n        ['Battle', values[2] || 0]\n      ]);\n\n      // Set chart options\n      var options = {\n        title:'Max Scores',\n        width: element.width(),\n        height: 400,\n        legend: { position: 'bottom' }\n      };\n\n      // Instantiate and draw our chart, passing in some options.\n      var chart = new google.visualization.ColumnChart(element[0]);\n      chart.draw(data, options);\n    }).catch(function(err) { console.log(err); });\n  }\n}\n\nmodule.exports = Reporting;\n"]}