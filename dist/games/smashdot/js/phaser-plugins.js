!function(t){"use strict";t.Plugin.KineticScrolling=function(i,e){t.Plugin.call(this,i,e),this.dragging=!1,this.timestamp=0,this.callbackID=0,this.targetX=0,this.targetY=0,this.autoScrollX=!1,this.autoScrollY=!1,this.startX=0,this.startY=0,this.velocityX=0,this.velocityY=0,this.amplitudeX=0,this.amplitudeY=0,this.directionWheel=0,this.velocityWheelX=0,this.velocityWheelY=0,this.settings={kineticMovement:!0,timeConstantScroll:325,horizontalScroll:!0,verticalScroll:!1,horizontalWheel:!0,verticalWheel:!1,deltaWheel:40}},t.Plugin.KineticScrolling.prototype=Object.create(t.Plugin.prototype),t.Plugin.KineticScrolling.prototype.constructor=t.Plugin.KineticScrolling,t.Plugin.KineticScrolling.prototype.configure=function(t){if(t)for(var i in t)this.settings.hasOwnProperty(i)&&(this.settings[i]=t[i])},t.Plugin.KineticScrolling.prototype.start=function(){this.game.input.onDown.add(this.beginMove,this),this.callbackID=this.game.input.addMoveCallback(this.moveCamera,this),this.game.input.onUp.add(this.endMove,this),this.game.input.mouse.mouseWheelCallback=this.mouseWheel.bind(this)},t.Plugin.KineticScrolling.prototype.beginMove=function(){this.startX=this.game.input.x,this.startY=this.game.input.y,this.dragging=!0,this.timestamp=Date.now(),this.velocityY=this.amplitudeY=this.velocityX=this.amplitudeX=0},t.Plugin.KineticScrolling.prototype.moveCamera=function(t,i,e){if(this.dragging){this.now=Date.now();var s=this.now-this.timestamp;if(this.timestamp=this.now,this.settings.horizontalScroll){var h=i-this.startX;this.startX=i,this.velocityX=.8*(1e3*h/(1+s))+.2*this.velocityX,this.game.camera.x-=h}if(this.settings.verticalScroll){var h=e-this.startY;this.startY=e,this.velocityY=.8*(1e3*h/(1+s))+.2*this.velocityY,this.game.camera.y-=h}}},t.Plugin.KineticScrolling.prototype.endMove=function(){this.dragging=!1,this.autoScrollX=!1,this.autoScrollY=!1,this.settings.kineticMovement&&(this.now=Date.now(),this.game.input.activePointer.withinGame&&(this.velocityX>10||this.velocityX<-10)&&(this.amplitudeX=.8*this.velocityX,this.targetX=Math.round(this.game.camera.x-this.amplitudeX),this.autoScrollX=!0),this.game.input.activePointer.withinGame&&(this.velocityY>10||this.velocityY<-10)&&(this.amplitudeY=.8*this.velocityY,this.targetY=Math.round(this.game.camera.y-this.amplitudeY),this.autoScrollY=!0),this.game.input.activePointer.withinGame||(this.settings.horizontalScroll&&(this.autoScrollX=!0),this.settings.verticalScroll&&(this.autoScrollY=!0)))},t.Plugin.KineticScrolling.prototype.update=function(){if(this.elapsed=Date.now()-this.timestamp,this.autoScrollX&&0!=this.amplitudeX){var t=-this.amplitudeX*Math.exp(-this.elapsed/this.settings.timeConstantScroll);t>.5||-.5>t?this.game.camera.x=this.targetX-t:(this.autoScrollX=!1,this.game.camera.x=this.targetX)}if(this.autoScrollY&&0!=this.amplitudeY){var t=-this.amplitudeY*Math.exp(-this.elapsed/this.settings.timeConstantScroll);t>.5||-.5>t?this.game.camera.y=this.targetY-t:(this.autoScrollY=!1,this.game.camera.y=this.targetY)}this.settings.horizontalWheel&&(this.velocityWheelX<-.1||this.velocityWheelX>.1||!this.game.input.activePointer.withinGame)&&(this.game.camera.x-=this.velocityWheelX,this.velocityWheelX*=.95),this.settings.verticalWheel&&(this.velocityWheelY<-.1||this.velocityWheelY>.1||!this.game.input.activePointer.withinGame)&&(this.game.camera.y-=this.velocityWheelY,this.velocityWheelY*=.95)},t.Plugin.KineticScrolling.prototype.mouseWheel=function(t){if(this.settings.horizontalWheel||this.settings.verticalWheel){t.preventDefault();var i=120*this.game.input.mouse.wheelDelta/this.settings.deltaWheel;this.directionWheel!=this.game.input.mouse.wheelDelta&&(this.velocityWheelX=0,this.velocityWheelY=0,this.directionWheel=this.game.input.mouse.wheelDelta),this.settings.horizontalWheel&&(this.autoScrollX=!1,this.velocityWheelX+=i),this.settings.verticalWheel&&(this.autoScrollY=!1,this.velocityWheelY+=i)}},t.Plugin.KineticScrolling.prototype.stop=function(){this.game.input.onDown.remove(this.beginMove,this),this.callbackID?this.game.input.deleteMoveCallback(this.callbackID):this.game.input.deleteMoveCallback(this.moveCamera,this),this.game.input.onUp.remove(this.endMove,this),this.game.input.mouse.mouseWheelCallback=null}}(Phaser);/*!
 * phaser-ads - version 0.7.5 
 * A Phaser plugin for providing nice ads integration in your phaser.io game
 *
 * OrangeGames
 * Build at 27-07-2016
 * Released under MIT License 
 */

var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Fabrique;!function(a){var b;!function(a){!function(a){a[a.start=0]="start",a[a.firstQuartile=1]="firstQuartile",a[a.midPoint=2]="midPoint",a[a.thirdQuartile=3]="thirdQuartile",a[a.complete=4]="complete"}(a.AdEvent||(a.AdEvent={}));var b=(a.AdEvent,function(a){function b(b,c){a.call(this,b,c),this.onContentPaused=new Phaser.Signal,this.onContentResumed=new Phaser.Signal,this.onAdProgression=new Phaser.Signal,this.onAdsDisabled=new Phaser.Signal,this.onAdClicked=new Phaser.Signal,this.provider=null,this.wasMuted=!1,Object.defineProperty(b,"ads",{value:this})}return __extends(b,a),b.prototype.setAdProvider=function(a){var b=this;this.provider=a,this.provider.setManager(this),this.onContentResumed.add(function(){b.wasMuted||(b.game.sound.mute=!1)})},b.prototype.requestAd=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");this.wasMuted=this.game.sound.mute,this.game.sound.mute=!0,this.provider.requestAd.apply(this.provider,a)},b.prototype.preloadAd=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");this.provider.preloadAd.apply(this.provider,a)},b.prototype.destroyAd=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");this.provider.destroyAd.apply(this.provider,a)},b.prototype.hideAd=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");this.provider.hideAd.apply(this.provider,a)},b.prototype.adsEnabled=function(){return this.provider.adsEnabled},b}(Phaser.Plugin));a.AdManager=b}(b=a.Plugins||(a.Plugins={}))}(Fabrique||(Fabrique={}));var Fabrique;!function(a){var b;!function(a){!function(a){a[a.Interstitial=0]="Interstitial",a[a.Video=1]="Video",a[a.Rewarded=2]="Rewarded",a[a.Banner=3]="Banner"}(a.HeyzapAdTypes||(a.HeyzapAdTypes={}));var b=a.HeyzapAdTypes,c=function(){function a(a,b){var c=this;this.adsEnabled=!1,(a.device.cordova||a.device.crosswalk)&&(this.adsEnabled=!0,HeyzapAds.start(b).then(function(){},function(a){c.adsEnabled=!1}))}return a.prototype.setManager=function(a){this.adManager=a},a.prototype.requestAd=function(a,c){var d=this;switch(this.adsEnabled||this.adManager.onContentResumed.dispatch(),a){case b.Interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){d.adManager.onAdClicked.dispatch(HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){d.adManager.onContentPaused.dispatch()},function(a){d.adManager.onContentResumed.dispatch()});break;case b.Video:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){d.adManager.onAdClicked.dispatch(HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){d.adManager.onContentPaused.dispatch()},function(a){d.adManager.onContentResumed.dispatch()});break;case b.Rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){d.adManager.onContentResumed.dispatch(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){d.adManager.onAdClicked.dispatch(HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){d.adManager.onContentPaused.dispatch()},function(a){d.adManager.onContentResumed.dispatch()});break;case b.Banner:HeyzapAds.BannerAd.show(c).then(function(){},function(a){})}},a.prototype.preloadAd=function(a){this.adsEnabled&&a===b.Rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(a){})},a.prototype.destroyAd=function(a){this.adsEnabled&&a===b.Banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(a){})},a.prototype.hideAd=function(a){this.adsEnabled&&a===b.Banner&&HeyzapAds.BannerAd.hide().then(function(){},function(a){})},a}();a.CordovaHeyzap=c}(b=a.AdProvider||(a.AdProvider={}))}(Fabrique||(Fabrique={}));var AdManager=Fabrique.Plugins.AdManager,Fabrique;!function(a){var b;!function(b){var c=function(){function b(a,b){this.adsManager=null,this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.adManager=null,this.resizeListener=null,this.adsEnabled=this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof a.parent?document.getElementById(a.parent):a.parent,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.gameContent.style.height="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.fauxVideoElement=this.gameContent.parentNode.appendChild(document.createElement("video")),this.fauxVideoElement.id="phaser-ad-faux-video",this.fauxVideoElement.style.position="absolute",this.fauxVideoElement.style.zIndex="999",this.fauxVideoElement.style.display="none",this.adTagUrl=b,this.game=a,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent,this.fauxVideoElement),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return b.prototype.setManager=function(a){this.adManager=a},b.prototype.requestAd=function(a){if(console.log("Ad Requested"),!this.adRequested){if(this.adsEnabled||this.adManager.onAdsDisabled.dispatch(!0),!this.googleEnabled)return void this.onContentResumeRequested();this.adDisplay.initialize();var b=new google.ima.AdsRequest;b.adTagUrl=this.adTagUrl+this.parseCustomParams(a);var c=window.innerWidth,d=window.innerHeight;this.game.scale.isFullScreen&&document.body.clientHeight<window.innerHeight&&(d=document.body.clientHeight,c=document.body.clientWidth),b.linearAdSlotWidth=c,b.linearAdSlotHeight=d,b.nonLinearAdSlotWidth=c,b.nonLinearAdSlotHeight=d,this.game.device.iOS&&(this.fauxVideoElement.style.width=c+"px",this.fauxVideoElement.style.height=d+"px"),b.forceNonLinearFullSlot=!0;try{this.game.device.iOS&&this.fauxVideoElement.play(),this.adRequested=!0,this.adLoader.requestAds(b)}catch(e){console.log(e),this.onContentResumeRequested()}}},b.prototype.preloadAd=function(){},b.prototype.destroyAd=function(){},b.prototype.hideAd=function(){},b.prototype.onAdManagerLoader=function(a){var b=this;console.log("AdsManager loaded");var c=new google.ima.AdsRenderingSettings;c.restoreCustomPlaybackStateOnAdBreakComplete=!0;var d=a.getAdsManager(this.gameContent,c);this.adsManager=d,console.log(d.isCustomClickTrackingUsed()),d.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),d.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),d.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(a){d.addEventListener(a,b.onAdEvent,!1,b)});try{this.game.device.iOS&&(this.fauxVideoElement.style.display="block"),this.adContent.style.display="block";var e=window.innerWidth,f=window.innerHeight;this.adsManager.init(e,f,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){console.log("Resizing ad size"),b.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL)},window.addEventListener("resize",this.resizeListener)}catch(g){console.log("Adsmanager error:",g),this.onAdError(g)}},b.prototype.onAdEvent=function(b){var c=this;switch(console.log("onAdEvent",b),b.type){case google.ima.AdEvent.Type.CLICK:this.adManager.onAdClicked.dispatch();break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var d=b.getAd();if(console.log("is ad linear?",d.isLinear()),d.isLinear()||this.onContentResumeRequested(),this.game.device.iOS)var e=setInterval(function(){c.fauxVideoElement.src.length>0&&(c.onContentResumeRequested(),clearInterval(e))},200);break;case google.ima.AdEvent.Type.STARTED:this.adManager.onAdProgression.dispatch(a.Plugins.AdEvent.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.onAdProgression.dispatch(a.Plugins.AdEvent.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.onAdProgression.dispatch(a.Plugins.AdEvent.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.onAdProgression.dispatch(a.Plugins.AdEvent.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.onAdProgression.dispatch(a.Plugins.AdEvent.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},b.prototype.onAdError=function(a){console.log("gneric ad error",a),null!==this.adsManager&&(this.adsManager.destroy(),this.adsManager=null,null!==this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},b.prototype.onContentPauseRequested=function(){console.log("onContentPauseRequested",arguments),this.adManager.onContentPaused.dispatch()},b.prototype.onContentResumeRequested=function(){return console.log("onContentResumeRequested",arguments),"undefined"==typeof google?void this.adManager.onContentResumed.dispatch():(this.adContent.style.display="none",this.game.device.iOS&&(this.fauxVideoElement.style.display="none"),void this.adManager.onContentResumed.dispatch())},b.prototype.parseCustomParams=function(a){if(void 0!==a){var b="";for(var c in a){b.length>0&&(b+="&");var d=Array.isArray(a[c])?a[c].join(","):a[c];b+=c+"="+d}return"&cust_params="+encodeURIComponent(b)}return""},b.prototype.areAdsEnabled=function(){var a=document.createElement("div");a.innerHTML="&nbsp;",a.className="adsbox",document.body.appendChild(a);var b,c=function(){var b=!0;return 0===a.offsetHeight&&(b=!1),a.remove(),b};return window.setTimeout(b=c(),100),b},b}();b.Ima3=c}(b=a.AdProvider||(a.AdProvider={}))}(Fabrique||(Fabrique={}));