!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},i={},a={}.hasOwnProperty,n=/^\.\.?(\/|$)/,o=function(e,t){for(var r,i=[],a=(n.test(t)?e+"/"+t:t).split("/"),o=0,s=a.length;o<s;o++)r=a[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},l=function(t){return function(r){var i=o(s(t),r);return e.require(i,t)}},u=function(e,t){var i=v&&v.createHot(e),a={id:e,exports:{},hot:i};return r[e]=a,t(a.exports,l(e),a),a.exports},c=function(e){return i[e]?c(i[e]):e},d=function(e,t){return c(o(s(e),t))},f=function(e,i){null==i&&(i="/");var n=c(e);if(a.call(r,n))return r[n].exports;if(a.call(t,n))return u(n,t[n]);throw new Error("Cannot find module '"+e+"' from '"+i+"'")};f.alias=function(e,t){i[t]=e};var h=/\.[^.\/]+$/,g=/\/index(\.[^\/]+)?$/,m=function(e){if(h.test(e)){var t=e.replace(h,"");a.call(i,t)&&i[t].replace(h,"")!==t+"/index"||(i[t]=e)}if(g.test(e)){var r=e.replace(g,"");a.call(i,r)||(i[r]=e)}};f.register=f.define=function(e,i){if(e&&"object"==typeof e)for(var n in e)a.call(e,n)&&f.register(n,e[n]);else t[e]=i,delete r[e],m(e)},f.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(d,f,t,r);f._cache=r,f.hmr=v&&v.wrap,f.brunch=!0,e.require=f}}(),function(){"undefined"==typeof window?this:window;require.register("pages/games/bashdot/reporting.js",function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=t("@greenhousegames/bash-dot/dist/reporting"),u=i(l),c=t("firebase-client.js"),d=i(c),f=function(e){function t(){a(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.reporting=new u["default"](e.firebase.database().ref("games/smashdot/data"),e.firebase.database().ref("games/smashdot/reporting")),e}return o(t,e),s(t,[{key:"draw",value:function(){this._drawGamePlayed(),this._drawUsersPlayed(),this._drawLastPlayed(),this._drawClassicRankings(),this._drawSurvivalRankings(),this._drawMaxScores(),this._drawModesPlayed(),this._drawDotsSmashed(),this._drawUserBreakdown()}},{key:"_drawClassicRankings",value:function(){var e=this;this.reporting.filter("users").max("classic-score").count().then(function(e){jQuery("#classic_ranking2").text("of "+e)})["catch"](function(e){console.log(e)}),this.reporting.filter("users-modes",{uid:this.currentUID(),mode:"classic"}).max("classic-score").value().then(function(t){t?e.reporting.filter("users",{uid:e.currentUID()}).max("classic-score").greater(t).count().then(function(e){jQuery("#classic_ranking1").text("#"+e)}):jQuery("#classic_ranking1").text("N/A")})["catch"](function(e){console.log(e)})}},{key:"_drawSurvivalRankings",value:function(){var e=this;this.reporting.filter("users").min("survival-duration").count().then(function(e){jQuery("#survival_ranking2").text("of "+e)})["catch"](function(e){console.log(e)}),this.reporting.filter("users-modes",{uid:this.currentUID(),mode:"survival"}).min("survival-duration").value().then(function(t){t?e.reporting.filter("users",{uid:e.currentUID()}).min("survival-duration").greater(t).count().then(function(e){jQuery("#survival_ranking1").text("#"+e)}):jQuery("#survival_ranking1").text("N/A")})["catch"](function(e){console.log(e)})}},{key:"_drawGamePlayed",value:function(){this.reporting.filter().sum("played").select(1).then(function(e){jQuery("#game_played_count").text(e[0]||0)})["catch"](function(e){console.log(e)})}},{key:"_drawUsersPlayed",value:function(){this.reporting.filter("users").sum("played").count().then(function(e){jQuery("#user_played_count").text(e)})["catch"](function(e){console.log(e)})}},{key:"_drawLastPlayed",value:function(){this.reporting.filter().last("endedAt").select(1).then(function(e){if(e[0]){var t=new Date;t.setTime(e[0]),jQuery("#last_played_timestamp").html('<time datetime="'+t.toISOString()+'"></time>'),jQuery("#last_played_timestamp time").timeago()}else jQuery("#last_played_timestamp").text("never")})["catch"](function(e){console.log(e)})}},{key:"_drawModesPlayed",value:function(){Promise.all([this.reporting.filter("modes",{mode:"classic"}).sum("played").value(),this.reporting.filter("modes",{mode:"survival"}).sum("played").value(),this.reporting.filter("modes",{mode:"battle"}).sum("played").value()]).then(function(e){var t=jQuery("#sum_played_chart"),r=new google.visualization.arrayToDataTable([["Mode","Times Played"],["Classic",e[0]||0],["Survival",e[1]||0],["Battle",e[2]||0]]),i={title:"Games Played",width:t.width(),height:9*t.width()/16,legend:{position:"bottom"}},a=new google.visualization.PieChart(t[0]);a.draw(r,i)})["catch"](function(e){console.log(e)})}},{key:"_drawUserBreakdown",value:function(){Promise.all([this.reporting.filter("users-modes").max("classic-score").greater(0).count(),this.reporting.filter("users-modes").max("survival-score").greater(0).count(),this.reporting.filter("users-modes").max("battle-score").greater(0).count()]).then(function(e){var t=jQuery("#user_breakdown_chart"),r=new google.visualization.arrayToDataTable([["Mode","Users"],["Classic",e[0]||0],["Survival",e[1]||0],["Battle",e[2]||0]]),i={title:"Unique Users",width:t.width(),height:9*t.width()/16,legend:{position:"bottom"}},a=new google.visualization.PieChart(t[0]);a.draw(r,i)})["catch"](function(e){console.log(e)})}},{key:"_drawDotsSmashed",value:function(){Promise.all([this.reporting.filter("modes",{mode:"classic"}).sum("classic-circles").value(),this.reporting.filter("modes",{mode:"survival"}).sum("survival-circles").value(),this.reporting.filter("modes",{mode:"battle"}).sum("battle-circles").value()]).then(function(e){var t=jQuery("#dots_smashed_chart"),r=new google.visualization.arrayToDataTable([["Mode","Dots Smashed"],["Classic",e[0]||0],["Survival",e[1]||0],["Battle",e[2]||0]]),i={title:"Dots Smashed",width:t.width(),height:9*t.width()/16,pieHole:.4,legend:{position:"bottom"}},a=new google.visualization.ColumnChart(t[0]);a.draw(r,i)})["catch"](function(e){console.log(e)})}},{key:"_drawMaxScores",value:function(){Promise.all([this.reporting.filter("modes",{mode:"classic"}).max("classic-score").value(),this.reporting.filter("modes",{mode:"survival"}).max("survival-score").value(),this.reporting.filter("modes",{mode:"battle"}).max("battle-score").value()]).then(function(e){var t=jQuery("#max_score_chart"),r=new google.visualization.arrayToDataTable([["Mode","Max Score"],["Classic",e[0]||0],["Survival",e[1]||0],["Battle",e[2]||0]]),i={title:"Max Scores",width:t.width(),height:9*t.width()/16,legend:{position:"bottom"}},a=new google.visualization.ColumnChart(t[0]);a.draw(r,i)})["catch"](function(e){console.log(e)})}}]),t}(d["default"]);google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){var e=new f;$(document).ready(function(){e.draw(),$(window).resize(function(){e.draw()})})})}),require.register("___globals___",function(e,t,r){window.jQuery=t("jquery"),window.$=t("jquery")})}(),require("___globals___");