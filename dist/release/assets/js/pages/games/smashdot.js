!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,s=i.length;a<s;a++)r=i[a],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t){return function(r){var n=a(s(t),r);return e.require(n,t)}},l=function(e,t){var n=v&&v.createHot(e),i={id:e,exports:{},hot:n};return r[e]=i,t(i.exports,u(e),i),i.exports},c=function(e){return n[e]?c(n[e]):e},f=function(e,t){return c(a(s(e),t))},d=function(e,n){null==n&&(n="/");var o=c(e);if(i.call(r,o))return r[o].exports;if(i.call(t,o))return l(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};d.alias=function(e,t){n[t]=e};var h=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,g=function(e){if(h.test(e)){var t=e.replace(h,"");i.call(n,t)&&n[t].replace(h,"")!==t+"/index"||(n[t]=e)}if(p.test(e)){var r=e.replace(p,"");i.call(n,r)||(n[r]=e)}};d.register=d.define=function(e,n){if(e&&"object"==typeof e)for(var o in e)i.call(e,o)&&d.register(o,e[o]);else t[e]=n,delete r[e],g(e)},d.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var v=e._hmr&&new e._hmr(f,d,t,r);d._cache=r,d.hmr=v&&v.wrap,d.brunch=!0,e.require=d}}(),function(){var e;"undefined"==typeof window?this:window;require.register("pages/games/smashdot.js",function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=t("@greenhousegames/smash-dot/dist/reporting"),l=n(u),c=t("firebase-client.js"),f=n(c),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.reporting=new l["default"](e.firebase.database().ref("games/smashdot/data"),e.firebase.database().ref("games/smashdot/reporting")),e}return a(t,e),s(t,[{key:"draw",value:function(){this._drawGamePlayed(),this._drawUsersPlayed(),this._drawLastPlayed(),this._drawClassicRankings(),this._drawSurvivalRankings(),this._drawMaxScores(),this._drawModesPlayed()}},{key:"_drawClassicRankings",value:function(){var e=this;this.reporting.filter("users").max("classic-score").count().then(function(e){jQuery("#classic_ranking2").text("of "+e)})["catch"](function(e){console.log(e)}),this.reporting.filter("users-modes",{uid:this.currentUID(),mode:"classic"}).max("classic-score").value().then(function(t){t?e.reporting.filter("users",{uid:e.currentUID()}).max("classic-score").greater(t).count().then(function(e){jQuery("#classic_ranking1").text("#"+e)}):jQuery("#classic_ranking1").text("N/A")})["catch"](function(e){console.log(e)})}},{key:"_drawSurvivalRankings",value:function(){var e=this;this.reporting.filter("users").min("survival-duration").count().then(function(e){jQuery("#survival_ranking2").text("of "+e)})["catch"](function(e){console.log(e)}),this.reporting.filter("users-modes",{uid:this.currentUID(),mode:"survival"}).min("survival-duration").value().then(function(t){t?e.reporting.filter("users",{uid:e.currentUID()}).min("survival-duration").greater(t).count().then(function(e){jQuery("#survival_ranking1").text("#"+e)}):jQuery("#survival_ranking1").text("N/A")})["catch"](function(e){console.log(e)})}},{key:"_drawGamePlayed",value:function(){this.reporting.filter().sum("played").select(1).then(function(e){jQuery("#game_played_count").text(e[0]||0)})["catch"](function(e){console.log(e)})}},{key:"_drawUsersPlayed",value:function(){this.reporting.filter("users").sum("played").count().then(function(e){jQuery("#user_played_count").text(e)})["catch"](function(e){console.log(e)})}},{key:"_drawLastPlayed",value:function(){this.reporting.filter().last("endedAt").select(1).then(function(e){if(e[0]){var t=new Date;t.setTime(e[0]),jQuery("#last_played_timestamp").attr("datetime",t.toISOString()),jQuery("#last_played_timestamp").timeago()}else jQuery("#last_played_timestamp").text("never")})["catch"](function(e){console.log(e)})}},{key:"_drawModesPlayed",value:function(){Promise.all([this.reporting.filter("modes",{mode:"survival"}).sum("played").value(),this.reporting.filter("modes",{mode:"classic"}).sum("played").value(),this.reporting.filter("modes",{mode:"battle"}).sum("played").value()]).then(function(e){var t=jQuery("#sum_played_chart"),r=new google.visualization.arrayToDataTable([["Mode","Times Played"],["Survival",e[0]||0],["Classic",e[1]||0],["Battle",e[2]||0]]),n={title:"Modes Played",width:t.width(),height:400,pieHole:.4,legend:{position:"bottom"}},i=new google.visualization.PieChart(t[0]);i.draw(r,n)})["catch"](function(e){console.log(e)})}},{key:"_drawMaxScores",value:function(){Promise.all([this.reporting.filter("modes",{mode:"survival"}).max("survival-score").value(),this.reporting.filter("modes",{mode:"classic"}).max("classic-score").value(),this.reporting.filter("modes",{mode:"battle"}).max("battle-score").value()]).then(function(e){var t=jQuery("#max_score_chart"),r=new google.visualization.arrayToDataTable([["Mode","Max Score"],["Survival",e[0]||0],["Classic",e[1]||0],["Battle",e[2]||0]]),n={title:"Max Scores",width:t.width(),height:400,legend:{position:"bottom"}},i=new google.visualization.ColumnChart(t[0]);i.draw(r,n)})["catch"](function(e){console.log(e)})}}]),t}(f["default"]);google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){var e=new d;e.requireAuth().then(function(){$(document).ready(function(){e.draw(),$(window).resize(function(){e.draw()})})})})}),require.alias("process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,r){window.jQuery=t("jquery"),window.$=t("jquery")})}(),require("___globals___");